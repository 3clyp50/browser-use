---
title: "Agent Settings"
description: "Learn how to configure the agent"
icon: "gear"
---

## Basic Settings

```python
from browser_use import Agent, ChatOpenAI

agent = Agent(
    task="Search for latest news about AI",
    llm=ChatOpenAI(model="gpt-4.1-mini"),
)

# Run the agent
history = await agent.run(max_steps=100)
```

### Required Parameters

- `task`: The instruction for the agent to execute
- `llm`: A chat model instance. See <a href="/customize/supported-models">Supported Models</a> for supported models.

### Running the Agent

The agent is executed using the async `run()` method:

- `max_steps` (default: `100`): Maximum number of steps the agent can take during execution

## Available Parameters

### Core Settings
- `controller`: Registry of functions the agent can call. Defaults to base Controller. See <a href="/customize/custom-functions">Custom Functions</a>.
- `browser_profile`: BrowserProfile object for custom browser configuration
- `browser_session`: BrowserSession object for reusing existing browser instances
- `output_model_schema`: Pydantic model class for structured output validation

### Vision & Processing
- `use_vision` (default: `True`): Enable/disable vision capabilities for processing screenshots
- `vision_detail_level` (default: `'auto'`): Screenshot detail level - `'low'`, `'high'`, or `'auto'`
- `page_extraction_llm`: Separate LLM model for page content extraction

### Actions & Behavior
- `initial_actions`: List of actions to run before the main task without LLM
- `max_actions_per_step` (default: `10`): Maximum actions per step
- `max_failures` (default: `3`): Maximum failures before giving up
- `retry_delay` (default: `10`): Wait time in seconds between retries
- `use_thinking` (default: `True`): Enable agent's reasoning process
- `flash_mode` (default: `False`): Fast mode that disables some features for speed

### System Messages
- `override_system_message`: Completely replace the default system prompt
- `extend_system_message`: Add additional instructions to the default system prompt

### File & Data Management
- `save_conversation_path`: Path to save complete conversation history
- `save_conversation_path_encoding` (default: `'utf-8'`): Encoding for saved conversations
- `available_file_paths`: List of file paths the agent can access
- `sensitive_data`: Dictionary of sensitive data to handle carefully

### Visual Output
- `generate_gif` (default: `False`): Generate GIF of agent actions. Set to `True` or string path
- `include_attributes`: List of HTML attributes to include in page analysis

### Performance & Limits
- `max_history_items`: Maximum number of history items to keep in memory
- `llm_timeout` (default: `90`): Timeout in seconds for LLM calls
- `step_timeout` (default: `120`): Timeout in seconds for each step
- `preload` (default: `True`): Preload browser for faster execution

### Advanced Options
- `validate_output` (default: `False`): Validate structured output against schema
- `calculate_cost` (default: `False`): Calculate and track API costs
- `include_tool_call_examples` (default: `False`): Include examples in tool calls
- `include_recent_events` (default: `False`): Include recent browser events in context
- `display_files_in_done_text` (default: `True`): Show file information in completion messages

### Browser Connection Examples

Connect to existing browser instances:

```python
# Connect to remote CDP browser
agent = Agent(
    task="your task",
    llm=llm,
    browser_session=BrowserSession(cdp_url='http://localhost:9222'),
)

# Connect to local browser process
agent = Agent(
    task="your task", 
    llm=llm,
    browser_session=BrowserSession(browser_pid=1234),
)
```

See <a href="/customize/real-browser">Connect to your Browser</a> for more details.

## Output Format

The `run()` method returns an `AgentHistoryList` object with the complete execution history:

```python
history = await agent.run()

# Access useful information
history.urls()              # List of visited URLs
history.screenshot_paths()  # List of screenshot paths  
history.action_names()      # Names of executed actions
history.extracted_content() # Content extracted during execution
history.errors()           # Any errors that occurred
history.model_actions()     # All actions with their parameters

# Analysis methods
history.final_result()      # Get the final extracted content
history.is_done()          # Check if agent completed successfully
history.has_errors()       # Check if any errors occurred
history.model_thoughts()   # Get the agent's reasoning process
history.action_results()   # Get results of all actions
```

<Note>
  For a complete list of helper methods, refer to the [AgentHistoryList source code](https://github.com/browser-use/browser-use/blob/main/browser_use/agent/views.py#L111).
</Note>